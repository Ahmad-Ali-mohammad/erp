export type FinanceGuideDoc = {
  topic: FinanceGuideTopic;
  title: string;
  purpose: string;
  when_to_use: string;
  priority_actions: string[];
  workflow_steps: string[];
  create_steps: string[];
  update_steps: string[];
  delete_steps: string[];
  validation_rules: string[];
  common_errors: string[];
  best_practices: string[];
};

export type FinanceGuideTopic = "overview" | "operations" | "accounting" | "reports" | "setup";

export const financeGuideTopics: Array<{ topic: FinanceGuideTopic; label: string; href: string }> = [
  { topic: "overview", label: "نظرة عامة", href: "/dashboard/finance/guides/overview" },
  { topic: "operations", label: "العمليات", href: "/dashboard/finance/guides/operations" },
  { topic: "accounting", label: "المحاسبة", href: "/dashboard/finance/guides/accounting" },
  { topic: "reports", label: "التقارير", href: "/dashboard/finance/guides/reports" },
  { topic: "setup", label: "الإعدادات", href: "/dashboard/finance/guides/setup" },
];

const financeGuidesMap: Record<FinanceGuideTopic, FinanceGuideDoc> = {
  overview: {
    topic: "overview",
    title: "دليل قسم المالية",
    purpose: "تنظيم العمل المالي في مسار واضح يبدأ من التشغيل اليومي وينتهي بالتقارير والاعتماد.",
    when_to_use: "استخدم هذا الدليل عند بدء العمل في النظام أو عند تدريب مستخدم جديد على ترتيب العمل الصحيح.",
    priority_actions: [
      "ابدأ من تبويب «العمليات» لتنفيذ المعاملات اليومية.",
      "انتقل إلى تبويب «المحاسبة» لمراجعة القيود وترحيلها.",
      "تحقق من تبويب «التقارير» قبل الإقفال.",
      "ارجع إلى تبويب «الإعدادات» فقط عند الحاجة لتعديل بيانات مرجعية.",
    ],
    workflow_steps: [
      "نظرة عامة ← عمليات ← محاسبة ← تقارير ← إعدادات.",
      "كل مستند تشغيلي يجب أن يمر بمسار: إنشاء ثم مراجعة ثم ترحيل.",
      "بعد الترحيل، تكون التعديلات عبر التصحيح أو العكس وليس التعديل المباشر.",
    ],
    create_steps: [
      "حدد نوع العملية قبل البدء (بيع، شراء، قبض، دفع، قيد يدوي).",
      "أدخل الحقول الإلزامية أولًا ثم الحقول المالية ثم الحقول المرجعية.",
      "راجع البيانات قبل الحفظ واعتمد التسلسل التشغيلي الرسمي.",
    ],
    update_steps: [
      "حدّث السجلات في حالة المسودة فقط.",
      "وثق سبب التعديل في الوصف أو الملاحظات.",
      "تحقق من أثر التعديل على التقارير المرتبطة.",
    ],
    delete_steps: [
      "لا تحذف أي سجل مرتبط بترحيل أو اعتماد نهائي.",
      "استخدم التعطيل أو الإلغاء بدل الحذف عند توفر الخيار.",
      "احذف فقط السجلات غير المستخدمة تشغيليًا ومحاسبيًا.",
    ],
    validation_rules: [
      "اكتمال الحقول الإلزامية قبل الحفظ.",
      "عدم التعارض مع الفترات المقفلة.",
      "منع تكرار نفس المرجع أو نفس رقم المستند.",
    ],
    common_errors: [
      "إدخال عملية بدون ربطها بالعميل أو المورد الصحيح.",
      "الانتقال للتقارير قبل ترحيل المعاملات.",
      "تعديل مستند مرحّل مباشرة دون استخدام مسار التصحيح.",
    ],
    best_practices: [
      "اعمل يوميًا على مراجعة المستندات غير المرحلة.",
      "اعتمد التقارير النهائية بعد التحقق من ميزان المراجعة.",
      "احفظ التعديلات المرجعية في أوقات منخفضة الحمل.",
    ],
  },
  operations: {
    topic: "operations",
    title: "دليل تبويب العمليات",
    purpose: "تنفيذ الدورة اليومية للمبيعات والمشتريات والخزينة والمخزون والتسوية البنكية.",
    when_to_use: "استخدم هذا التبويب لكل معاملة تشغيلية يومية قبل الوصول للتقارير أو الإقفال.",
    priority_actions: [
      "نفّذ دورة المبيعات: عرض سعر ← أمر بيع ← فاتورة بيع ← سند قبض.",
      "نفّذ دورة المشتريات: أمر شراء ← استلام ← فاتورة مشتريات ← سند دفع.",
      "نفّذ عمليات نقطة البيع للحالات النقدية المباشرة.",
      "شغّل التسوية البنكية بعد رفع كشف البنك.",
    ],
    workflow_steps: [
      "لا تتجاوز خطوات الدورة، لأن كل خطوة تبني على السابقة.",
      "حركات المخزون تُنشأ من المستندات التشغيلية فقط.",
      "القبض والدفع يحدثان تسوية تلقائية للفواتير المرتبطة.",
    ],
    create_steps: [
      "أنشئ المستند الرئيسي وحدد الطرف (عميل/مورد).",
      "أدخل البنود والكميات والأسعار مع مراجعة الإجماليات.",
      "احفظ المستند ثم نفّذ الإجراء التالي (إرسال/استلام/ترحيل).",
    ],
    update_steps: [
      "حدّث المستند قبل الترحيل فقط.",
      "عدّل البنود بحذر وتأكد من توافقها مع المخزون.",
      "أعد مراجعة حالة الفاتورة بعد أي تعديل مالي.",
    ],
    delete_steps: [
      "امنع الحذف بعد بدء التحصيل أو السداد.",
      "استخدم الإلغاء بدل الحذف إذا كان المستند مستخدمًا.",
      "تحقق من عدم وجود حركة مخزون أو قيد مرتبط قبل الحذف.",
    ],
    validation_rules: [
      "منع السداد الزائد على الفاتورة.",
      "منع صرف مخزون أكبر من الرصيد المتاح.",
      "تطابق الإجماليات قبل اعتماد العملية.",
    ],
    common_errors: [
      "تسجيل فاتورة مشتريات قبل إثبات الاستلام.",
      "ترحيل فاتورة مبيعات بدون بنود صحيحة.",
      "مطابقة بنكية بمراجع أو تواريخ غير دقيقة.",
    ],
    best_practices: [
      "اعمل بالتسلسل الإجرائي دون قفز.",
      "راجع المستندات غير المكتملة يوميًا.",
      "اربط العمليات بمراكز التكلفة عند الحاجة التحليلية.",
    ],
  },
  accounting: {
    topic: "accounting",
    title: "دليل تبويب المحاسبة",
    purpose: "إدارة القيود اليومية والضوابط المحاسبية والترحيل والإقفال.",
    when_to_use: "استخدم هذا التبويب عند إدخال قيود يدوية أو مراجعة القيود المولدة تلقائيًا قبل الاعتماد.",
    priority_actions: [
      "أدخل قيدًا فرديًا متوازنًا (مدين = دائن).",
      "راجع الحسابات والتواريخ ومراكز التكلفة قبل الترحيل.",
      "نفّذ الترحيل بواسطة مستخدم مفوض مختلف عن المنشئ.",
      "عند الخطأ استخدم العكس/التصحيح بدل تعديل القيد المرحل.",
    ],
    workflow_steps: [
      "إنشاء القيد ← مراجعة التوازن ← ترحيل ← متابعة أثره في التقارير.",
      "قيود الفترات المقفلة تُرفض تلقائيًا.",
      "كل قيد يجب أن يحمل وصفًا واضحًا ومرجعًا داعمًا.",
    ],
    create_steps: [
      "أدخل تاريخ القيد والوصف ونوع القيد.",
      "أضف سطور القيد مع تحديد الحسابات بشكل صحيح.",
      "تأكد من التوازن ثم احفظ القيد.",
    ],
    update_steps: [
      "التعديل مسموح في حالة المسودة فقط.",
      "دوّن سبب التعديل في الوصف.",
      "أعد فحص أثر التعديل على التقارير.",
    ],
    delete_steps: [
      "لا تحذف القيود المرحلة.",
      "احذف فقط القيود المسودة غير المستخدمة.",
      "استخدم العكس عند الحاجة لإلغاء قيد مرحل.",
    ],
    validation_rules: [
      "منع الترحيل غير المتوازن.",
      "منع الترحيل داخل فترة مقفلة إقفالًا نهائيًا.",
      "تطبيق فصل المهام (المنشئ لا يعتمد نفس القيد).",
    ],
    common_errors: [
      "عدم توازن سطور القيد.",
      "استخدام حساب غير مناسب لطبيعة العملية.",
      "ترحيل قيد بتاريخ غير صالح للفترة.",
    ],
    best_practices: [
      "اعتمد القيد دوريًا بدل التأجيل لنهاية الفترة.",
      "اربط كل قيد بمستند مصدر إن وجد.",
      "راجع القيود المعلقة قبل الإقفال الشهري.",
    ],
  },
  reports: {
    topic: "reports",
    title: "دليل تبويب التقارير",
    purpose: "قراءة الأداء المالي والتشغيلي بناءً على القيود المرحلة.",
    when_to_use: "استخدم هذا التبويب بعد الترحيل للتأكد من صحة النتائج واتخاذ القرار.",
    priority_actions: [
      "ابدأ بميزان المراجعة للتأكد من التوازن العام.",
      "راجع قائمة الدخل لمعرفة صافي الربح أو الخسارة.",
      "راجع الميزانية العمومية لقراءة المركز المالي.",
      "استخدم أعمار الذمم وتقارير الربحية للتحليل التفصيلي.",
    ],
    workflow_steps: [
      "تحديد الفترة ← اختيار التقرير ← مراجعة الفلاتر ← تحليل النتائج.",
      "التحقق من الاتساق بين التقارير قبل الاعتماد.",
      "تصدير أو طباعة التقارير بعد التحقق النهائي.",
    ],
    create_steps: [
      "حدد الفترة الزمنية أو تاريخ المرجع بدقة.",
      "اختر التقرير المناسب للغرض التحليلي.",
      "احفظ نسخة تصدير عند الحاجة للمراجعة أو المشاركة.",
    ],
    update_steps: [
      "لا تعديل مباشر على التقرير، التعديل يكون على البيانات المصدر.",
      "غيّر الفلاتر لإعادة القراءة من زوايا مختلفة.",
      "أعد تشغيل التقرير بعد أي ترحيل جديد.",
    ],
    delete_steps: [
      "لا يوجد حذف للتقرير نفسه.",
      "الحذف ينطبق فقط على بيانات المصدر وفق الضوابط.",
    ],
    validation_rules: [
      "اكتمال الترحيل للفترة المطلوب عرضها.",
      "صحة الفلاتر (التاريخ، الفرع، مركز التكلفة).",
      "مقارنة نتائج التقرير بميزان المراجعة عند الشك.",
    ],
    common_errors: [
      "اختيار فترة زمنية غير صحيحة.",
      "قراءة تقرير قبل ترحيل العمليات.",
      "مقارنة تقارير بفلاتر مختلفة دون توثيق.",
    ],
    best_practices: [
      "اعتمد قالب تقارير موحد لكل إقفال شهري.",
      "احتفظ بنسخ مرجعية للتقارير المعتمدة.",
      "اربط أي ملاحظة تحليلية بالمستند أو القيد المصدر.",
    ],
  },
  setup: {
    topic: "setup",
    title: "دليل تبويب الإعدادات",
    purpose: "ضبط البيانات المرجعية والقواعد الأساسية التي يعمل عليها النظام المالي.",
    when_to_use: "استخدم هذا التبويب قبل بدء التشغيل، أو عند الحاجة لتعديل قواعد الترحيل والتهيئة.",
    priority_actions: [
      "أنشئ شجرة الحسابات ومراكز التكلفة أولًا.",
      "أدخل بيانات العملاء والموردين والأصناف والمواقع.",
      "راجع قواعد الترحيل والفترات قبل تفعيل التشغيل الكامل.",
      "اضبط إعدادات الطباعة والتسلسل والترقيم.",
    ],
    workflow_steps: [
      "إعداد مرجعي ← اختبار على حالة بسيطة ← اعتماد ← بدء التشغيل.",
      "أي تعديل مرجعي يجب أن يسبق أو يرافق خطة مراجعة أثر.",
      "تغييرات الإعدادات الحساسة يجب أن تكون موثقة.",
    ],
    create_steps: [
      "أضف العناصر المرجعية الإلزامية أولًا.",
      "أدخل البيانات بدقة حسب الهيكل المعتمد.",
      "اختبر الإعداد الجديد قبل تعميمه.",
    ],
    update_steps: [
      "نفذ التعديل خارج أوقات الذروة.",
      "وثق سبب التعديل وتاريخه.",
      "تحقق من أثر التعديل على المستندات الجديدة.",
    ],
    delete_steps: [
      "تجنب حذف إعداد مستخدم تاريخيًا.",
      "استخدم التعطيل بدل الحذف عند توفره.",
      "احذف فقط العناصر غير المستخدمة وغير المرتبطة بسجلات.",
    ],
    validation_rules: [
      "تناسق الحسابات مع قواعد الترحيل.",
      "صحة الفترات المحاسبية قبل التفعيل.",
      "صحة إعدادات الطباعة والترقيم.",
    ],
    common_errors: [
      "تعديل إعدادات حرجة أثناء تشغيل كثيف.",
      "حذف عنصر مرجعي مرتبط بمستندات سابقة.",
      "عدم اختبار الإعداد بعد تعديله.",
    ],
    best_practices: [
      "افصل بين تغييرات الإعدادات والتشغيل اليومي.",
      "اعتمد قائمة تحقق قبل وبعد كل تعديل مرجعي.",
      "نفذ مراجعة دورية شهرية للإعدادات الحرجة.",
    ],
  },
};

export function getFinanceGuide(topic: string): FinanceGuideDoc | null {
  const normalized = topic as FinanceGuideTopic;
  return financeGuidesMap[normalized] ?? null;
}
