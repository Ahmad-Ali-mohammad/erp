services:
  db:
    ports: []

  backend:
    ports: []
    expose:
      - "8000"
    command: >
      sh -c "python manage.py migrate &&
      if [ \"$$SEED_DEMO_DATA\" = \"true\" ]; then python manage.py seed_demo_data; fi &&
      python manage.py runserver 0.0.0.0:8000 --noreload"

  frontend:
    ports:
      - "127.0.0.1:3000:3000"
    command: ["npm", "run", "dev", "--", "-H", "0.0.0.0", "-p", "3000"]

  phpmyadmin:
    profiles: ["disabled"]
